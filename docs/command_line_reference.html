

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Command Line Reference &mdash; Rally 2.0.4.dev0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Configuration" href="configuration.html" />
    <link rel="prev" title="Elasticsearch Version Support" href="versions.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Rally
          

          
          </a>

          
            
            
              <div class="version">
                2.0.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started with Rally</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker.html">Running Rally with Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="race.html">Run a Benchmark: Races</a></li>
<li class="toctree-l1"><a class="reference internal" href="tournament.html">Compare Results: Tournaments</a></li>
<li class="toctree-l1"><a class="reference internal" href="cluster_management.html">Setting up a Cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes.html">Tips and Tricks</a></li>
</ul>
<p class="caption"><span class="caption-text">Extending Rally</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="adding_tracks.html">Define Custom Workloads: Tracks</a></li>
<li class="toctree-l1"><a class="reference internal" href="developing.html">Developing Rally</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="versions.html">Elasticsearch Version Support</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Command Line Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#subcommands">Subcommands</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#race"><code class="docutils literal notranslate"><span class="pre">race</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#list"><code class="docutils literal notranslate"><span class="pre">list</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#info"><code class="docutils literal notranslate"><span class="pre">info</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#compare"><code class="docutils literal notranslate"><span class="pre">compare</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-track"><code class="docutils literal notranslate"><span class="pre">create-track</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#download"><code class="docutils literal notranslate"><span class="pre">download</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#install"><code class="docutils literal notranslate"><span class="pre">install</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#start"><code class="docutils literal notranslate"><span class="pre">start</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#stop"><code class="docutils literal notranslate"><span class="pre">stop</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#command-line-flags">Command Line Flags</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#track-path"><code class="docutils literal notranslate"><span class="pre">track-path</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#track-repository"><code class="docutils literal notranslate"><span class="pre">track-repository</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#track-revision"><code class="docutils literal notranslate"><span class="pre">track-revision</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#track"><code class="docutils literal notranslate"><span class="pre">track</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#track-params"><code class="docutils literal notranslate"><span class="pre">track-params</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#challenge"><code class="docutils literal notranslate"><span class="pre">challenge</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#race-id"><code class="docutils literal notranslate"><span class="pre">race-id</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#installation-id"><code class="docutils literal notranslate"><span class="pre">installation-id</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#node-name"><code class="docutils literal notranslate"><span class="pre">node-name</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#network-host"><code class="docutils literal notranslate"><span class="pre">network-host</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#http-port"><code class="docutils literal notranslate"><span class="pre">http-port</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#master-nodes"><code class="docutils literal notranslate"><span class="pre">master-nodes</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#seed-hosts"><code class="docutils literal notranslate"><span class="pre">seed-hosts</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#include-tasks"><code class="docutils literal notranslate"><span class="pre">include-tasks</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#exclude-tasks"><code class="docutils literal notranslate"><span class="pre">exclude-tasks</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#team-repository"><code class="docutils literal notranslate"><span class="pre">team-repository</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#team-revision"><code class="docutils literal notranslate"><span class="pre">team-revision</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#team-path"><code class="docutils literal notranslate"><span class="pre">team-path</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#target-os"><code class="docutils literal notranslate"><span class="pre">target-os</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#target-arch"><code class="docutils literal notranslate"><span class="pre">target-arch</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#car"><code class="docutils literal notranslate"><span class="pre">car</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#car-params"><code class="docutils literal notranslate"><span class="pre">car-params</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#elasticsearch-plugins"><code class="docutils literal notranslate"><span class="pre">elasticsearch-plugins</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#plugin-params"><code class="docutils literal notranslate"><span class="pre">plugin-params</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pipeline"><code class="docutils literal notranslate"><span class="pre">pipeline</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#enable-driver-profiling"><code class="docutils literal notranslate"><span class="pre">enable-driver-profiling</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#test-mode"><code class="docutils literal notranslate"><span class="pre">test-mode</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#telemetry"><code class="docutils literal notranslate"><span class="pre">telemetry</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#telemetry-params"><code class="docutils literal notranslate"><span class="pre">telemetry-params</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#runtime-jdk"><code class="docutils literal notranslate"><span class="pre">runtime-jdk</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#revision"><code class="docutils literal notranslate"><span class="pre">revision</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#distribution-version"><code class="docutils literal notranslate"><span class="pre">distribution-version</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#distribution-repository"><code class="docutils literal notranslate"><span class="pre">distribution-repository</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#report-format"><code class="docutils literal notranslate"><span class="pre">report-format</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#show-in-report"><code class="docutils literal notranslate"><span class="pre">show-in-report</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#report-file"><code class="docutils literal notranslate"><span class="pre">report-file</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#client-options"><code class="docutils literal notranslate"><span class="pre">client-options</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#on-error"><code class="docutils literal notranslate"><span class="pre">on-error</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#load-driver-hosts"><code class="docutils literal notranslate"><span class="pre">load-driver-hosts</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#target-hosts"><code class="docutils literal notranslate"><span class="pre">target-hosts</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#limit"><code class="docutils literal notranslate"><span class="pre">limit</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#quiet"><code class="docutils literal notranslate"><span class="pre">quiet</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kill-running-processes"><code class="docutils literal notranslate"><span class="pre">kill-running-processes</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#offline"><code class="docutils literal notranslate"><span class="pre">offline</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#preserve-install"><code class="docutils literal notranslate"><span class="pre">preserve-install</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#user-tag"><code class="docutils literal notranslate"><span class="pre">user-tag</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#indices"><code class="docutils literal notranslate"><span class="pre">indices</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#advanced-topics">Advanced topics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1"><code class="docutils literal notranslate"><span class="pre">target-hosts</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2"><code class="docutils literal notranslate"><span class="pre">client-options</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="offline.html">Offline Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="track.html">Track Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="car.html">Configure Elasticsearch: Cars</a></li>
<li class="toctree-l1"><a class="reference internal" href="elasticsearch_plugins.html">Using Elasticsearch Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="telemetry.html">Telemetry Devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="rally_daemon.html">Rally Daemon</a></li>
<li class="toctree-l1"><a class="reference internal" href="pipelines.html">Pipelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="metrics.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="summary_report.html">Summary Report</a></li>
</ul>
<p class="caption"><span class="caption-text">Additional Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="migrate.html">Migration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions (FAQ)</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="community.html">Community Resources</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Rally</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          
















<div role="navigation" aria-label="breadcrumbs navigation">

    <ul class="wy-breadcrumbs">
        
        <li><a href="index.html">Docs</a> &raquo;</li>
        
        <li>Command Line Reference</li>
        
        
        <li class="wy-breadcrumbs-aside">
            
            
            <a href="_sources/command_line_reference.rst.txt" rel="nofollow"> View page source</a>
            
            
        </li>
        
    </ul>

    
    <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="command-line-reference">
<h1>Command Line Reference<a class="headerlink" href="#command-line-reference" title="Permalink to this headline">¶</a></h1>
<p>You can control Rally with subcommands and command line flags:</p>
<ul class="simple">
<li><p>Subcommands determine which task Rally performs.</p></li>
<li><p>Command line flags are used to change Rally’s behavior but not all command line flags can be used for each subcommand. To find out which command line flags are supported by a specific subcommand, just run <code class="docutils literal notranslate"><span class="pre">esrally</span> <span class="pre">&lt;&lt;subcommand&gt;&gt;</span> <span class="pre">--help</span></code>.</p></li>
</ul>
<div class="section" id="subcommands">
<h2>Subcommands<a class="headerlink" href="#subcommands" title="Permalink to this headline">¶</a></h2>
<div class="section" id="race">
<h3><code class="docutils literal notranslate"><span class="pre">race</span></code><a class="headerlink" href="#race" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">race</span></code> subcommand is used to actually run a benchmark. It is the default one and chosen implicitly if none is given.</p>
</div>
<div class="section" id="list">
<h3><code class="docutils literal notranslate"><span class="pre">list</span></code><a class="headerlink" href="#list" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">list</span></code> subcommand is used to list different configuration options:</p>
<ul class="simple">
<li><p>telemetry: Will show all <a class="reference internal" href="telemetry.html"><span class="doc">telemetry devices</span></a> that are supported by Rally.</p></li>
<li><p>tracks: Will show all tracks that are supported by Rally. As this <em>may</em> depend on the Elasticsearch version that you want to benchmark, you can specify <code class="docutils literal notranslate"><span class="pre">--distribution-version</span></code> and also <code class="docutils literal notranslate"><span class="pre">--distribution-repository</span></code> as additional options.</p></li>
<li><p>pipelines: Will show all <a class="reference internal" href="pipelines.html"><span class="doc">pipelines</span></a> that are supported by Rally.</p></li>
<li><p>races: Will show a list of the most recent races. This is needed for the <a class="reference internal" href="tournament.html"><span class="doc">tournament mode</span></a>.</p></li>
<li><p>cars: Will show all cars that are supported by Rally (i.e. Elasticsearch configurations).</p></li>
<li><p>elasticsearch-plugins: Will show all Elasticsearch plugins and their configurations that are supported by Rally.</p></li>
</ul>
<p>To list a specific configuration option, place it after the <code class="docutils literal notranslate"><span class="pre">list</span></code> subcommand. For example, <code class="docutils literal notranslate"><span class="pre">esrally</span> <span class="pre">list</span> <span class="pre">pipelines</span></code> will list all pipelines known to Rally.</p>
</div>
<div class="section" id="info">
<h3><code class="docutils literal notranslate"><span class="pre">info</span></code><a class="headerlink" href="#info" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">info</span></code> subcommand prints details about a track. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">esrally</span> <span class="n">info</span> <span class="o">--</span><span class="n">track</span><span class="o">=</span><span class="n">noaa</span> <span class="o">--</span><span class="n">challenge</span><span class="o">=</span><span class="n">append</span><span class="o">-</span><span class="n">no</span><span class="o">-</span><span class="n">conflicts</span>
</pre></div>
</div>
<p>This will print:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Showing</span> <span class="n">details</span> <span class="k">for</span> <span class="n">track</span> <span class="p">[</span><span class="n">noaa</span><span class="p">]:</span>

<span class="o">*</span> <span class="n">Description</span><span class="p">:</span> <span class="n">Global</span> <span class="n">daily</span> <span class="n">weather</span> <span class="n">measurements</span> <span class="kn">from</span> <span class="nn">NOAA</span>
<span class="o">*</span> <span class="n">Documents</span><span class="p">:</span> <span class="mi">33</span><span class="p">,</span><span class="mi">659</span><span class="p">,</span><span class="mi">481</span>
<span class="o">*</span> <span class="n">Compressed</span> <span class="n">Size</span><span class="p">:</span> <span class="mf">947.3</span> <span class="n">MB</span>
<span class="o">*</span> <span class="n">Uncompressed</span> <span class="n">Size</span><span class="p">:</span> <span class="mf">9.0</span> <span class="n">GB</span>

<span class="o">================================================</span>
<span class="n">Challenge</span> <span class="p">[</span><span class="n">append</span><span class="o">-</span><span class="n">no</span><span class="o">-</span><span class="n">conflicts</span><span class="p">]</span> <span class="p">(</span><span class="n">run</span> <span class="n">by</span> <span class="n">default</span><span class="p">)</span>
<span class="o">================================================</span>

<span class="n">Indexes</span> <span class="n">the</span> <span class="n">whole</span> <span class="n">document</span> <span class="n">corpus</span> <span class="n">using</span> <span class="n">Elasticsearch</span> <span class="n">default</span> <span class="n">settings</span><span class="o">.</span> <span class="n">We</span> <span class="n">only</span> <span class="n">adjust</span> <span class="n">the</span> <span class="n">number</span> <span class="n">of</span> <span class="n">replicas</span> <span class="k">as</span> <span class="n">we</span> <span class="n">benchmark</span> <span class="n">a</span> <span class="n">single</span> <span class="n">node</span> <span class="n">cluster</span> <span class="ow">and</span> <span class="n">Rally</span> <span class="n">will</span> <span class="n">only</span> <span class="n">start</span> <span class="n">the</span> <span class="n">benchmark</span> <span class="k">if</span> <span class="n">the</span> <span class="n">cluster</span> <span class="n">turns</span> <span class="n">green</span> <span class="ow">and</span> <span class="n">we</span> <span class="n">want</span> <span class="n">to</span> <span class="n">ensure</span> <span class="n">that</span> <span class="n">we</span> <span class="n">don</span><span class="s1">&#39;t use the query cache. Document ids are unique so all index operations are append only. After that a couple of queries are run.</span>

<span class="n">Schedule</span><span class="p">:</span>
<span class="o">----------</span>

<span class="mf">1.</span> <span class="n">delete</span><span class="o">-</span><span class="n">index</span>
<span class="mf">2.</span> <span class="n">create</span><span class="o">-</span><span class="n">index</span>
<span class="mf">3.</span> <span class="n">check</span><span class="o">-</span><span class="n">cluster</span><span class="o">-</span><span class="n">health</span>
<span class="mf">4.</span> <span class="n">index</span> <span class="p">(</span><span class="mi">8</span> <span class="n">clients</span><span class="p">)</span>
<span class="mf">5.</span> <span class="n">refresh</span><span class="o">-</span><span class="n">after</span><span class="o">-</span><span class="n">index</span>
<span class="mf">6.</span> <span class="n">force</span><span class="o">-</span><span class="n">merge</span>
<span class="mf">7.</span> <span class="n">refresh</span><span class="o">-</span><span class="n">after</span><span class="o">-</span><span class="n">force</span><span class="o">-</span><span class="n">merge</span>
<span class="mf">8.</span> <span class="n">range_field_big_range</span>
<span class="mf">9.</span> <span class="n">range_field_small_range</span>
<span class="mf">10.</span> <span class="n">range_field_conjunction_big_range_small_term_query</span>
<span class="mf">11.</span> <span class="n">range_field_conjunction_small_range_small_term_query</span>
<span class="mf">12.</span> <span class="n">range_field_conjunction_small_range_big_term_query</span>
<span class="mf">13.</span> <span class="n">range_field_conjunction_big_range_big_term_query</span>
<span class="mf">14.</span> <span class="n">range_field_disjunction_small_range_small_term_query</span>
<span class="mf">15.</span> <span class="n">range_field_disjunction_big_range_small_term_query</span>
</pre></div>
</div>
<p>It is also possible to use task filters (e.g. <code class="docutils literal notranslate"><span class="pre">--include-tasks</span></code>) or to refer to a track via its path (<code class="docutils literal notranslate"><span class="pre">--track-path</span></code>) or use a different track repository (<code class="docutils literal notranslate"><span class="pre">--track-repository</span></code>).</p>
</div>
<div class="section" id="compare">
<h3><code class="docutils literal notranslate"><span class="pre">compare</span></code><a class="headerlink" href="#compare" title="Permalink to this headline">¶</a></h3>
<p>This subcommand is needed for <a class="reference internal" href="tournament.html"><span class="doc">tournament mode</span></a> and its usage is described there.</p>
</div>
<div class="section" id="create-track">
<h3><code class="docutils literal notranslate"><span class="pre">create-track</span></code><a class="headerlink" href="#create-track" title="Permalink to this headline">¶</a></h3>
<p>This subcommand creates a basic track from data in an existing cluster. See the <a class="reference internal" href="adding_tracks.html#add-track-create-track"><span class="std std-ref">track tutorial</span></a> for a complete walkthrough.</p>
</div>
<div class="section" id="download">
<h3><code class="docutils literal notranslate"><span class="pre">download</span></code><a class="headerlink" href="#download" title="Permalink to this headline">¶</a></h3>
<p>This subcommand can be used to download Elasticsearch distributions. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">esrally</span> <span class="n">download</span> <span class="o">--</span><span class="n">distribution</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">6.8</span><span class="o">.</span><span class="mi">0</span> <span class="o">--</span><span class="n">quiet</span>
</pre></div>
</div>
<p>This will download the OSS distribution of Elasticsearch 6.8.0. Because <code class="docutils literal notranslate"><span class="pre">--quiet</span></code> is specified, Rally will suppress all non-essential output (banners, progress messages etc.) and only return the location of the binary on the local machine after it has downloaded it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;elasticsearch&quot;</span><span class="p">:</span> <span class="s2">&quot;/Users/dm/.rally/benchmarks/distributions/elasticsearch-oss-6.8.0.tar.gz&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>To download the default distribution you need to specify a license (via <code class="docutils literal notranslate"><span class="pre">--car</span></code>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">esrally</span> <span class="n">download</span> <span class="o">--</span><span class="n">distribution</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">6.8</span><span class="o">.</span><span class="mi">0</span> <span class="o">--</span><span class="n">car</span><span class="o">=</span><span class="n">basic</span><span class="o">-</span><span class="n">license</span> <span class="o">--</span><span class="n">quiet</span>
</pre></div>
</div>
<p>This will show the path to the default distribution:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;elasticsearch&quot;</span><span class="p">:</span> <span class="s2">&quot;/Users/dm/.rally/benchmarks/distributions/elasticsearch-6.8.0.tar.gz&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="install">
<h3><code class="docutils literal notranslate"><span class="pre">install</span></code><a class="headerlink" href="#install" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This subcommand is experimental. Expect the functionality and the command line interface to change significantly even in patch releases.</p>
</div>
<p>This subcommand can be used to install a single Elasticsearch node. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">esrally</span> <span class="n">install</span> <span class="o">--</span><span class="n">quiet</span> <span class="o">--</span><span class="n">distribution</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">7.4</span><span class="o">.</span><span class="mi">2</span> <span class="o">--</span><span class="n">node</span><span class="o">-</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;rally-node-0&quot;</span> <span class="o">--</span><span class="n">network</span><span class="o">-</span><span class="n">host</span><span class="o">=</span><span class="s2">&quot;127.0.0.1&quot;</span> <span class="o">--</span><span class="n">http</span><span class="o">-</span><span class="n">port</span><span class="o">=</span><span class="mi">39200</span> <span class="o">--</span><span class="n">master</span><span class="o">-</span><span class="n">nodes</span><span class="o">=</span><span class="s2">&quot;rally-node-0&quot;</span> <span class="o">--</span><span class="n">seed</span><span class="o">-</span><span class="n">hosts</span><span class="o">=</span><span class="s2">&quot;127.0.0.1:39300&quot;</span>
</pre></div>
</div>
<p>This will output the id of this installation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;installation-id&quot;</span><span class="p">:</span> <span class="s2">&quot;69ffcfee-6378-4090-9e93-87c9f8ee59a7&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Please see the <a class="reference internal" href="cluster_management.html"><span class="doc">cluster management tutorial</span></a> for the intended use and a complete walkthrough.</p>
</div>
<div class="section" id="start">
<h3><code class="docutils literal notranslate"><span class="pre">start</span></code><a class="headerlink" href="#start" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This subcommand is experimental. Expect the functionality and the command line interface to change significantly even in patch releases.</p>
</div>
<p>This subcommand can be used to start a single Elasticsearch node that has been previously installed with the <code class="docutils literal notranslate"><span class="pre">install</span></code> subcommand. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">esrally</span> <span class="n">start</span> <span class="o">--</span><span class="n">installation</span><span class="o">-</span><span class="nb">id</span><span class="o">=</span><span class="n">INSTALLATION_ID</span> <span class="o">--</span><span class="n">race</span><span class="o">-</span><span class="nb">id</span><span class="o">=</span><span class="n">RACE_ID</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">INSTALLATION_ID</span></code> is the installation id value as shown in the output of the <code class="docutils literal notranslate"><span class="pre">install</span></code> command. The <code class="docutils literal notranslate"><span class="pre">RACE_ID</span></code> can be chosen freely but is required to be the same for all nodes in a cluster.</p>
<p>Please see the <a class="reference internal" href="cluster_management.html"><span class="doc">cluster management tutorial</span></a> for the intended use and a complete walkthrough.</p>
</div>
<div class="section" id="stop">
<h3><code class="docutils literal notranslate"><span class="pre">stop</span></code><a class="headerlink" href="#stop" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This subcommand is experimental. Expect the functionality and the command line interface to change significantly even in patch releases.</p>
</div>
<p>This subcommand can be used to stop a single Elasticsearch node that has been previously started with the <code class="docutils literal notranslate"><span class="pre">start</span></code> subcommand. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">esrally</span> <span class="n">stop</span> <span class="o">--</span><span class="n">installation</span><span class="o">-</span><span class="nb">id</span><span class="o">=</span><span class="n">INSTALLATION_ID</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">INSTALLATION_ID</span></code> is the installation id value as shown in the output of the <code class="docutils literal notranslate"><span class="pre">install</span></code> command.</p>
<p>Please see the <a class="reference internal" href="cluster_management.html"><span class="doc">cluster management tutorial</span></a> for the intended use and a complete walkthrough.</p>
</div>
</div>
<div class="section" id="command-line-flags">
<h2>Command Line Flags<a class="headerlink" href="#command-line-flags" title="Permalink to this headline">¶</a></h2>
<div class="section" id="track-path">
<h3><code class="docutils literal notranslate"><span class="pre">track-path</span></code><a class="headerlink" href="#track-path" title="Permalink to this headline">¶</a></h3>
<p>Can be either a directory that contains a <code class="docutils literal notranslate"><span class="pre">track.json</span></code> file or a <code class="docutils literal notranslate"><span class="pre">.json</span></code> file with an arbitrary name that contains a track specification. <code class="docutils literal notranslate"><span class="pre">--track-path</span></code> and <code class="docutils literal notranslate"><span class="pre">--track-repository</span></code> as well as <code class="docutils literal notranslate"><span class="pre">--track</span></code> are mutually exclusive. See the <a class="reference internal" href="track.html"><span class="doc">track reference</span></a> to decide whether you should use <code class="docutils literal notranslate"><span class="pre">--track-path</span></code> or <code class="docutils literal notranslate"><span class="pre">--track-repository</span></code> / <code class="docutils literal notranslate"><span class="pre">--track</span></code>.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># provide a directory - Rally searches for a track.json file in this directory</span>
<span class="c1"># Track name is &quot;app-logs&quot;</span>
<span class="n">esrally</span> <span class="o">--</span><span class="n">track</span><span class="o">-</span><span class="n">path</span><span class="o">=~/</span><span class="n">Projects</span><span class="o">/</span><span class="n">tracks</span><span class="o">/</span><span class="n">app</span><span class="o">-</span><span class="n">logs</span>
<span class="c1"># provide a file name - Rally uses this file directly</span>
<span class="c1"># Track name is &quot;syslog&quot;</span>
<span class="n">esrally</span> <span class="o">--</span><span class="n">track</span><span class="o">-</span><span class="n">path</span><span class="o">=~/</span><span class="n">Projects</span><span class="o">/</span><span class="n">tracks</span><span class="o">/</span><span class="n">syslog</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
</div>
<div class="section" id="track-repository">
<h3><code class="docutils literal notranslate"><span class="pre">track-repository</span></code><a class="headerlink" href="#track-repository" title="Permalink to this headline">¶</a></h3>
<p>Selects the track repository that Rally should use to resolve tracks. By default the <code class="docutils literal notranslate"><span class="pre">default</span></code> track repository is used, which is available in the Github project <a class="reference external" href="https://github.com/elastic/rally-tracks">rally-tracks</a>. See the <a class="reference internal" href="track.html"><span class="doc">track reference</span></a> on how to add your own track repositories. <code class="docutils literal notranslate"><span class="pre">--track-path</span></code> and <code class="docutils literal notranslate"><span class="pre">--track-repository</span></code> as well as <code class="docutils literal notranslate"><span class="pre">--track</span></code> are mutually exclusive.</p>
</div>
<div class="section" id="track-revision">
<h3><code class="docutils literal notranslate"><span class="pre">track-revision</span></code><a class="headerlink" href="#track-revision" title="Permalink to this headline">¶</a></h3>
<p>Selects a specific revision in the track repository. By default, Rally will choose the most appropriate branch on its own but in some cases it is necessary to specify a certain commit. This is mostly needed when testing whether a change in performance has occurred due to a change in the workload.</p>
</div>
<div class="section" id="track">
<h3><code class="docutils literal notranslate"><span class="pre">track</span></code><a class="headerlink" href="#track" title="Permalink to this headline">¶</a></h3>
<p>Selects the track that Rally should run. By default the <code class="docutils literal notranslate"><span class="pre">geonames</span></code> track is run. For more details on how tracks work, see <a class="reference internal" href="adding_tracks.html"><span class="doc">adding tracks</span></a> or the <a class="reference internal" href="track.html"><span class="doc">track reference</span></a>. <code class="docutils literal notranslate"><span class="pre">--track-path</span></code> and <code class="docutils literal notranslate"><span class="pre">--track-repository</span></code> as well as <code class="docutils literal notranslate"><span class="pre">--track</span></code> are mutually exclusive.</p>
</div>
<div class="section" id="track-params">
<span id="clr-track-params"></span><h3><code class="docutils literal notranslate"><span class="pre">track-params</span></code><a class="headerlink" href="#track-params" title="Permalink to this headline">¶</a></h3>
<p>With this parameter you can inject variables into tracks. The supported variables depend on the track and you should check the track JSON file to see which variables can be provided.</p>
<p>It accepts a list of comma-separated key-value pairs or a JSON file name. The key-value pairs have to be delimited by a colon.</p>
<p><strong>Examples</strong>:</p>
<p>Consider the following track snippet showing a single challenge:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;index-only&quot;</span><span class="p">,</span>
  <span class="s2">&quot;schedule&quot;</span><span class="p">:</span> <span class="p">[</span>
     <span class="p">{</span>
       <span class="s2">&quot;operation&quot;</span><span class="p">:</span> <span class="p">{</span>
         <span class="s2">&quot;operation-type&quot;</span><span class="p">:</span> <span class="s2">&quot;bulk&quot;</span><span class="p">,</span>
         <span class="s2">&quot;bulk-size&quot;</span><span class="p">:</span> <span class="p">{{</span> <span class="n">bulk_size</span><span class="o">|</span><span class="n">default</span><span class="p">(</span><span class="mi">5000</span><span class="p">)</span> <span class="p">}}</span>
       <span class="p">},</span>
       <span class="s2">&quot;warmup-time-period&quot;</span><span class="p">:</span> <span class="mi">120</span><span class="p">,</span>
       <span class="s2">&quot;clients&quot;</span><span class="p">:</span> <span class="p">{{</span> <span class="n">clients</span><span class="o">|</span><span class="n">default</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="p">}}</span>
     <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Rally tracks can use the Jinja templating language and the construct <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">some_variable|default(0)</span> <span class="pre">}}</span></code> that you can see above is a <a class="reference external" href="http://jinja.pocoo.org/docs/2.10/templates/#default">feature of Jinja</a> to define default values for variables.</p>
<p>We can see that it defines two variables:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">bulk_size</span></code> with a default value of 5000</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">clients</span></code> with a default value of 8</p></li>
</ul>
<p>When we run this track, we can override these defaults:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--track-params=&quot;bulk_size:2000,clients:16&quot;</span></code> will set the bulk size to 2000 and the number of clients for bulk indexing to 16.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--track-params=&quot;bulk_size:8000&quot;</span></code> will just set the bulk size to 8000 and keep the default value of 8 clients.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--track-params=&quot;params.json&quot;</span></code> will read the track parameters from a JSON file (defined below)</p></li>
</ul>
<p>Example JSON file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;bulk_size&quot;</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span>
   <span class="s2">&quot;clients&quot;</span><span class="p">:</span> <span class="mi">16</span>
<span class="p">}</span>
</pre></div>
</div>
<p>All track parameters are recorded for each metrics record in the metrics store. Also, when you run <code class="docutils literal notranslate"><span class="pre">esrally</span> <span class="pre">list</span> <span class="pre">races</span></code>, it will show all track parameters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Race</span> <span class="n">Timestamp</span>    <span class="n">Track</span>    <span class="n">Track</span> <span class="n">Parameters</span>          <span class="n">Challenge</span>            <span class="n">Car</span>       <span class="n">User</span> <span class="n">Tag</span>
<span class="o">----------------</span>  <span class="o">-------</span>  <span class="o">-------------------------</span> <span class="o">-------------------</span>  <span class="o">--------</span>  <span class="o">---------</span>
<span class="mi">20160518</span><span class="n">T122341Z</span>  <span class="n">pmc</span>      <span class="n">bulk_size</span><span class="o">=</span><span class="mi">8000</span>            <span class="n">append</span><span class="o">-</span><span class="n">no</span><span class="o">-</span><span class="n">conflicts</span>  <span class="n">defaults</span>
<span class="mi">20160518</span><span class="n">T112341Z</span>  <span class="n">pmc</span>      <span class="n">bulk_size</span><span class="o">=</span><span class="mi">2000</span><span class="p">,</span><span class="n">clients</span><span class="o">=</span><span class="mi">16</span> <span class="n">append</span><span class="o">-</span><span class="n">no</span><span class="o">-</span><span class="n">conflicts</span>  <span class="n">defaults</span>
</pre></div>
</div>
<p>Note that the default values are not recorded or shown (Rally does not know about them).</p>
</div>
<div class="section" id="challenge">
<h3><code class="docutils literal notranslate"><span class="pre">challenge</span></code><a class="headerlink" href="#challenge" title="Permalink to this headline">¶</a></h3>
<p>A track consists of one or more challenges. With this flag you can specify which challenge should be run. If you don’t specify a challenge, Rally derives the default challenge itself. To see the default challenge of a track, run <code class="docutils literal notranslate"><span class="pre">esrally</span> <span class="pre">list</span> <span class="pre">tracks</span></code>.</p>
</div>
<div class="section" id="race-id">
<h3><code class="docutils literal notranslate"><span class="pre">race-id</span></code><a class="headerlink" href="#race-id" title="Permalink to this headline">¶</a></h3>
<p>A unique identifier for this race. By default a random UUID is automatically chosen by Rally.</p>
</div>
<div class="section" id="installation-id">
<h3><code class="docutils literal notranslate"><span class="pre">installation-id</span></code><a class="headerlink" href="#installation-id" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This command line parameter is experimental. Expect the functionality and the command line interface to change significantly even in patch releases.</p>
</div>
<p>A unique identifier for an installation. This id is automatically generated by Rally when the <code class="docutils literal notranslate"><span class="pre">install</span></code> subcommand is invoked and needs to be provided in the <code class="docutils literal notranslate"><span class="pre">start</span></code> and <code class="docutils literal notranslate"><span class="pre">stop</span></code> subcommands in order to refer to that installation.</p>
</div>
<div class="section" id="node-name">
<h3><code class="docutils literal notranslate"><span class="pre">node-name</span></code><a class="headerlink" href="#node-name" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This command line parameter is experimental. Expect the functionality and the command line interface to change significantly even in patch releases.</p>
</div>
<p>Used to specify the current node’s name in the cluster when it is setup via the <code class="docutils literal notranslate"><span class="pre">install</span></code> subcommand.</p>
</div>
<div class="section" id="network-host">
<h3><code class="docutils literal notranslate"><span class="pre">network-host</span></code><a class="headerlink" href="#network-host" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This command line parameter is experimental. Expect the functionality and the command line interface to change significantly even in patch releases.</p>
</div>
<p>Used to specify the IP address to which the current cluster node should bind to when it is setup via the <code class="docutils literal notranslate"><span class="pre">install</span></code> subcommand.</p>
</div>
<div class="section" id="http-port">
<h3><code class="docutils literal notranslate"><span class="pre">http-port</span></code><a class="headerlink" href="#http-port" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This command line parameter is experimental. Expect the functionality and the command line interface to change significantly even in patch releases.</p>
</div>
<p>Used to specify the port on which the current cluster node should listen for HTTP traffic when it is setup via the <code class="docutils literal notranslate"><span class="pre">install</span></code> subcommand. The corresponding transport port will automatically be chosen by Rally and is always the specified HTTP port + 100.</p>
</div>
<div class="section" id="master-nodes">
<h3><code class="docutils literal notranslate"><span class="pre">master-nodes</span></code><a class="headerlink" href="#master-nodes" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This command line parameter is experimental. Expect the functionality and the command line interface to change significantly even in patch releases.</p>
</div>
<p>A comma-separated list that specifies the node names of the master nodes in the cluster when a node is setup via the <code class="docutils literal notranslate"><span class="pre">install</span></code> subcommand. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">master</span><span class="o">-</span><span class="n">nodes</span><span class="o">=</span><span class="s2">&quot;rally-node-0,rally-node-1,rally-node-2&quot;</span>
</pre></div>
</div>
<p>This will treat the nodes named <code class="docutils literal notranslate"><span class="pre">rally-node-0</span></code>, <code class="docutils literal notranslate"><span class="pre">rally-node-1</span></code> and <code class="docutils literal notranslate"><span class="pre">rally-node-2</span></code> as <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/discovery-settings.html#initial_master_nodes">initial master nodes</a>.</p>
</div>
<div class="section" id="seed-hosts">
<h3><code class="docutils literal notranslate"><span class="pre">seed-hosts</span></code><a class="headerlink" href="#seed-hosts" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This command line parameter is experimental. Expect the functionality and the command line interface to change significantly even in patch releases.</p>
</div>
<p>A comma-separated list if IP:transport port pairs used to specify the seed hosts in the cluster when a node is setup via the <code class="docutils literal notranslate"><span class="pre">install</span></code> subcommand. See the <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/discovery-settings.html#unicast.hosts">Elasticsearch documentation</a> for a detailed explanation of the seed hosts parameter. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">seed</span><span class="o">-</span><span class="n">hosts</span><span class="o">=</span><span class="s2">&quot;192.168.14.77:39300,192.168.14.78:39300,192.168.14.79:39300&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="include-tasks">
<span id="clr-include-tasks"></span><h3><code class="docutils literal notranslate"><span class="pre">include-tasks</span></code><a class="headerlink" href="#include-tasks" title="Permalink to this headline">¶</a></h3>
<p>Each challenge consists of one or more tasks but sometimes you are only interested to run a subset of all tasks. For example, you might have prepared an index already and want only to repeatedly run search benchmarks. Or you want to run only the indexing task but nothing else.</p>
<p>You can use <code class="docutils literal notranslate"><span class="pre">--include-tasks</span></code> to specify a comma-separated list of tasks that you want to run. Each item in the list defines either the name of a task or the operation type of a task. Only the tasks that match will be executed. You can use the <code class="docutils literal notranslate"><span class="pre">info</span></code> subcommand to list the tasks of a challenge, or look at the track source.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Tasks will be executed in the order that are defined in the challenge, not in the order they are defined in the command.</p>
</div>
<p><strong>Examples</strong>:</p>
<ul class="simple">
<li><p>Execute only the tasks with the name <code class="docutils literal notranslate"><span class="pre">index</span></code> and <code class="docutils literal notranslate"><span class="pre">term</span></code>: <code class="docutils literal notranslate"><span class="pre">--include-tasks=&quot;index,term&quot;</span></code></p></li>
<li><p>Execute only tasks of type <code class="docutils literal notranslate"><span class="pre">search</span></code>: <code class="docutils literal notranslate"><span class="pre">--include-tasks=&quot;type:search&quot;</span></code></p></li>
<li><p>You can also mix and match: <code class="docutils literal notranslate"><span class="pre">--include-tasks=&quot;index,type:search&quot;</span></code></p></li>
</ul>
</div>
<div class="section" id="exclude-tasks">
<h3><code class="docutils literal notranslate"><span class="pre">exclude-tasks</span></code><a class="headerlink" href="#exclude-tasks" title="Permalink to this headline">¶</a></h3>
<p>Similarly to <a class="reference internal" href="#clr-include-tasks"><span class="std std-ref">include-tasks</span></a> when a challenge consists of one or more tasks you might be interested in excluding a single operations but include the rest.</p>
<p>You can use <code class="docutils literal notranslate"><span class="pre">--exclude-tasks</span></code> to specify a comma-separated list of tasks that you want to skip. Each item in the list defines either the name of a task or the operation type of a task. Only the tasks that did not match will be executed.</p>
<p><strong>Examples</strong>:</p>
<ul class="simple">
<li><p>Skip any tasks with the name <code class="docutils literal notranslate"><span class="pre">index</span></code> and <code class="docutils literal notranslate"><span class="pre">term</span></code>: <code class="docutils literal notranslate"><span class="pre">--exclude-tasks=&quot;index,term&quot;</span></code></p></li>
<li><p>Skip any tasks of type <code class="docutils literal notranslate"><span class="pre">search</span></code>: <code class="docutils literal notranslate"><span class="pre">--exclude-tasks=&quot;type:search&quot;</span></code></p></li>
<li><p>You can also mix and match: <code class="docutils literal notranslate"><span class="pre">--exclude-tasks=&quot;index,type:search&quot;</span></code></p></li>
</ul>
</div>
<div class="section" id="team-repository">
<h3><code class="docutils literal notranslate"><span class="pre">team-repository</span></code><a class="headerlink" href="#team-repository" title="Permalink to this headline">¶</a></h3>
<p>Selects the team repository that Rally should use to resolve cars. By default the <code class="docutils literal notranslate"><span class="pre">default</span></code> team repository is used, which is available in the Github project <a class="reference external" href="https://github.com/elastic/rally-teams">rally-teams</a>. See the documentation about <a class="reference internal" href="car.html"><span class="doc">cars</span></a> on how to add your own team repositories.</p>
</div>
<div class="section" id="team-revision">
<h3><code class="docutils literal notranslate"><span class="pre">team-revision</span></code><a class="headerlink" href="#team-revision" title="Permalink to this headline">¶</a></h3>
<p>Selects a specific revision in the team repository. By default, Rally will choose the most appropriate branch on its own (see the <a class="reference internal" href="car.html"><span class="doc">car reference</span></a> for more details) but in some cases it is necessary to specify a certain commit. This is mostly needed when benchmarking specific historic commits of Elasticsearch which are incompatible with the current master branch of the team repository.</p>
</div>
<div class="section" id="team-path">
<h3><code class="docutils literal notranslate"><span class="pre">team-path</span></code><a class="headerlink" href="#team-path" title="Permalink to this headline">¶</a></h3>
<p>A directory that contains a team configuration. <code class="docutils literal notranslate"><span class="pre">--team-path</span></code> and <code class="docutils literal notranslate"><span class="pre">--team-repository</span></code> are mutually exclusive. See the <a class="reference internal" href="car.html"><span class="doc">car reference</span></a> for the required directory structure.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">esrally</span> <span class="o">--</span><span class="n">team</span><span class="o">-</span><span class="n">path</span><span class="o">=~/</span><span class="n">Projects</span><span class="o">/</span><span class="n">es</span><span class="o">-</span><span class="n">teams</span>
</pre></div>
</div>
</div>
<div class="section" id="target-os">
<h3><code class="docutils literal notranslate"><span class="pre">target-os</span></code><a class="headerlink" href="#target-os" title="Permalink to this headline">¶</a></h3>
<p>Specifies the name of the target operating system for which an artifact should be downloaded. By default this value is automatically derived based on the operating system Rally is run. This command line flag is only applicable to the <code class="docutils literal notranslate"><span class="pre">download</span></code> subcommand and allows to download an artifact for a different operating system. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">esrally</span> <span class="n">download</span> <span class="o">--</span><span class="n">distribution</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">7.5</span><span class="o">.</span><span class="mi">1</span> <span class="o">--</span><span class="n">target</span><span class="o">-</span><span class="n">os</span><span class="o">=</span><span class="n">linux</span>
</pre></div>
</div>
</div>
<div class="section" id="target-arch">
<h3><code class="docutils literal notranslate"><span class="pre">target-arch</span></code><a class="headerlink" href="#target-arch" title="Permalink to this headline">¶</a></h3>
<p>Specifies the name of the target CPU architecture for which an artifact should be downloaded. By default this value is automatically derived based on the CPU architecture Rally is run. This command line flag is only applicable to the <code class="docutils literal notranslate"><span class="pre">download</span></code> subcommand and allows to download an artifact for a different CPU architecture. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">esrally</span> <span class="n">download</span> <span class="o">--</span><span class="n">distribution</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">7.5</span><span class="o">.</span><span class="mi">1</span> <span class="o">--</span><span class="n">target</span><span class="o">-</span><span class="n">arch</span><span class="o">=</span><span class="n">x86_64</span>
</pre></div>
</div>
</div>
<div class="section" id="car">
<h3><code class="docutils literal notranslate"><span class="pre">car</span></code><a class="headerlink" href="#car" title="Permalink to this headline">¶</a></h3>
<p>A <a class="reference internal" href="car.html"><span class="doc">car</span></a> defines the Elasticsearch configuration that will be used for the benchmark. To see a list of possible cars, issue <code class="docutils literal notranslate"><span class="pre">esrally</span> <span class="pre">list</span> <span class="pre">cars</span></code>. You can specify one or multiple comma-separated values.</p>
<p><strong>Example</strong></p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">esrally</span> <span class="o">--</span><span class="n">car</span><span class="o">=</span><span class="s2">&quot;4gheap,ea&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p>Rally will configure Elasticsearch with 4GB of heap (<code class="docutils literal notranslate"><span class="pre">4gheap</span></code>) and enable Java assertions (<code class="docutils literal notranslate"><span class="pre">ea</span></code>).</p>
</div>
<div class="section" id="car-params">
<h3><code class="docutils literal notranslate"><span class="pre">car-params</span></code><a class="headerlink" href="#car-params" title="Permalink to this headline">¶</a></h3>
<p>Allows to override config variables of Elasticsearch. It accepts a list of comma-separated key-value pairs or a JSON file name. The key-value pairs have to be delimited by a colon.</p>
<p><strong>Example</strong></p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">esrally</span> <span class="o">--</span><span class="n">car</span><span class="o">=</span><span class="s2">&quot;4gheap&quot;</span> <span class="o">--</span><span class="n">car</span><span class="o">-</span><span class="n">params</span><span class="o">=</span><span class="s2">&quot;data_paths:&#39;/opt/elasticsearch&#39;&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p>The variables that are exposed depend on the <a class="reference external" href="https://github.com/elastic/rally-teams/tree/master/cars">car’s configuration</a>. In addition, Rally implements special handling for the variable <code class="docutils literal notranslate"><span class="pre">data_paths</span></code> (by default the value for this variable is determined by Rally).</p>
</div>
<div class="section" id="elasticsearch-plugins">
<h3><code class="docutils literal notranslate"><span class="pre">elasticsearch-plugins</span></code><a class="headerlink" href="#elasticsearch-plugins" title="Permalink to this headline">¶</a></h3>
<p>A comma-separated list of Elasticsearch plugins to install for the benchmark. If a plugin supports multiple configurations you need to specify the configuration after the plugin name. To see a list of possible plugins and configurations, issue <code class="docutils literal notranslate"><span class="pre">esrally</span> <span class="pre">list</span> <span class="pre">elasticsearch-plugins</span></code>.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">esrally</span> <span class="o">--</span><span class="n">elasticsearch</span><span class="o">-</span><span class="n">plugins</span><span class="o">=</span><span class="s2">&quot;analysis-icu,xpack:security&quot;</span>
</pre></div>
</div>
<p>In this example, Rally will install the <code class="docutils literal notranslate"><span class="pre">analysis-icu</span></code> plugin and the <code class="docutils literal notranslate"><span class="pre">x-pack</span></code> plugin with the <code class="docutils literal notranslate"><span class="pre">security</span></code> configuration. See the reference documentation about <a class="reference internal" href="elasticsearch_plugins.html"><span class="doc">Elasticsearch plugins</span></a> for more details.</p>
</div>
<div class="section" id="plugin-params">
<h3><code class="docutils literal notranslate"><span class="pre">plugin-params</span></code><a class="headerlink" href="#plugin-params" title="Permalink to this headline">¶</a></h3>
<p>Allows to override variables of Elasticsearch plugins. It accepts a list of comma-separated key-value pairs or a JSON file name. The key-value pairs have to be delimited by a colon.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">esrally</span> <span class="o">--</span><span class="n">distribution</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">6.1</span><span class="o">.</span><span class="mf">1.</span> <span class="o">--</span><span class="n">elasticsearch</span><span class="o">-</span><span class="n">plugins</span><span class="o">=</span><span class="s2">&quot;x-pack:monitoring-http&quot;</span> <span class="o">--</span><span class="n">plugin</span><span class="o">-</span><span class="n">params</span><span class="o">=</span><span class="s2">&quot;monitoring_type:&#39;https&#39;,monitoring_host:&#39;some_remote_host&#39;,monitoring_port:10200,monitoring_user:&#39;rally&#39;,monitoring_password:&#39;m0n1t0r1ng&#39;&quot;</span>
</pre></div>
</div>
<p>This enables the HTTP exporter of <a class="reference external" href="https://www.elastic.co/products/x-pack/monitoring">X-Pack Monitoring</a> and exports the data to the configured monitoring host.</p>
</div>
<div class="section" id="pipeline">
<h3><code class="docutils literal notranslate"><span class="pre">pipeline</span></code><a class="headerlink" href="#pipeline" title="Permalink to this headline">¶</a></h3>
<p>Selects the <a class="reference internal" href="pipelines.html"><span class="doc">pipeline</span></a> that Rally should run.</p>
<p>Rally can autodetect the pipeline in most cases. If you specify <code class="docutils literal notranslate"><span class="pre">--distribution-version</span></code> it will auto-select the pipeline <code class="docutils literal notranslate"><span class="pre">from-distribution</span></code> otherwise it will use <code class="docutils literal notranslate"><span class="pre">from-sources</span></code>.</p>
</div>
<div class="section" id="enable-driver-profiling">
<span id="clr-enable-driver-profiling"></span><h3><code class="docutils literal notranslate"><span class="pre">enable-driver-profiling</span></code><a class="headerlink" href="#enable-driver-profiling" title="Permalink to this headline">¶</a></h3>
<p>This option enables a profiler on all tasks that the load test driver performs. It is intended to help track authors spot accidental bottlenecks, especially if they implement their own runners or parameter sources. When this mode is enabled, Rally will enable a profiler in the load driver module. After each task and for each client, Rally will add the profile information to a dedicated profile log file. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2017</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">09</span> <span class="mi">08</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">24</span><span class="p">,</span><span class="mi">35</span> <span class="n">rally</span><span class="o">.</span><span class="n">profile</span> <span class="n">INFO</span>
<span class="o">===</span> <span class="n">Profile</span> <span class="n">START</span> <span class="k">for</span> <span class="n">client</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span> <span class="n">task</span> <span class="p">[</span><span class="n">index</span><span class="o">-</span><span class="n">append</span><span class="o">-</span><span class="mi">1000</span><span class="p">]</span> <span class="o">===</span>
   <span class="mi">16052402</span> <span class="n">function</span> <span class="n">calls</span> <span class="p">(</span><span class="mi">15794402</span> <span class="n">primitive</span> <span class="n">calls</span><span class="p">)</span> <span class="ow">in</span> <span class="mf">180.221</span> <span class="n">seconds</span>

   <span class="n">Ordered</span> <span class="n">by</span><span class="p">:</span> <span class="n">cumulative</span> <span class="n">time</span>

   <span class="n">ncalls</span>  <span class="n">tottime</span>  <span class="n">percall</span>  <span class="n">cumtime</span>  <span class="n">percall</span> <span class="n">filename</span><span class="p">:</span><span class="n">lineno</span><span class="p">(</span><span class="n">function</span><span class="p">)</span>
      <span class="mi">130</span>    <span class="mf">0.001</span>    <span class="mf">0.000</span>  <span class="mf">168.089</span>    <span class="mf">1.293</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">dm</span><span class="o">/</span><span class="n">Projects</span><span class="o">/</span><span class="n">rally</span><span class="o">/</span><span class="n">esrally</span><span class="o">/</span><span class="n">driver</span><span class="o">/</span><span class="n">driver</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">908</span><span class="p">(</span><span class="n">time_period_based</span><span class="p">)</span>
      <span class="mi">129</span>    <span class="mf">0.260</span>    <span class="mf">0.002</span>  <span class="mf">168.088</span>    <span class="mf">1.303</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">dm</span><span class="o">/.</span><span class="n">rally</span><span class="o">/</span><span class="n">benchmarks</span><span class="o">/</span><span class="n">tracks</span><span class="o">/</span><span class="n">develop</span><span class="o">/</span><span class="n">bottleneck</span><span class="o">/</span><span class="n">parameter_sources</span><span class="o">/</span><span class="n">bulk_source</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">79</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
   <span class="mi">129000</span>    <span class="mf">0.750</span>    <span class="mf">0.000</span>  <span class="mf">167.791</span>    <span class="mf">0.001</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">dm</span><span class="o">/.</span><span class="n">rally</span><span class="o">/</span><span class="n">benchmarks</span><span class="o">/</span><span class="n">tracks</span><span class="o">/</span><span class="n">develop</span><span class="o">/</span><span class="n">bottleneck</span><span class="o">/</span><span class="n">parameter_sources</span><span class="o">/</span><span class="n">randomevent</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">142</span><span class="p">(</span><span class="n">generate_event</span><span class="p">)</span>
   <span class="mi">516000</span>    <span class="mf">0.387</span>    <span class="mf">0.000</span>  <span class="mf">160.485</span>    <span class="mf">0.000</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">dm</span><span class="o">/.</span><span class="n">rally</span><span class="o">/</span><span class="n">benchmarks</span><span class="o">/</span><span class="n">tracks</span><span class="o">/</span><span class="n">develop</span><span class="o">/</span><span class="n">bottleneck</span><span class="o">/</span><span class="n">parameter_sources</span><span class="o">/</span><span class="n">weightedarray</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">20</span><span class="p">(</span><span class="n">get_random</span><span class="p">)</span>
   <span class="mi">516000</span>    <span class="mf">6.199</span>    <span class="mf">0.000</span>  <span class="mf">160.098</span>    <span class="mf">0.000</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">dm</span><span class="o">/.</span><span class="n">rally</span><span class="o">/</span><span class="n">benchmarks</span><span class="o">/</span><span class="n">tracks</span><span class="o">/</span><span class="n">develop</span><span class="o">/</span><span class="n">bottleneck</span><span class="o">/</span><span class="n">parameter_sources</span><span class="o">/</span><span class="n">weightedarray</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">23</span><span class="p">(</span><span class="n">__random_index</span><span class="p">)</span>
   <span class="mi">516000</span>    <span class="mf">1.292</span>    <span class="mf">0.000</span>  <span class="mf">152.289</span>    <span class="mf">0.000</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">Cellar</span><span class="o">/</span><span class="n">python3</span><span class="o">/</span><span class="mf">3.6</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">Frameworks</span><span class="o">/</span><span class="n">Python</span><span class="o">.</span><span class="n">framework</span><span class="o">/</span><span class="n">Versions</span><span class="o">/</span><span class="mf">3.6</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="o">.</span><span class="mi">6</span><span class="o">/</span><span class="n">random</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">96</span><span class="p">(</span><span class="n">seed</span><span class="p">)</span>
   <span class="mi">516000</span>  <span class="mf">150.783</span>    <span class="mf">0.000</span>  <span class="mf">150.783</span>    <span class="mf">0.000</span> <span class="p">{</span><span class="n">function</span> <span class="n">Random</span><span class="o">.</span><span class="n">seed</span> <span class="n">at</span> <span class="mh">0x10b7fa2f0</span><span class="p">}</span>
   <span class="mi">129000</span>    <span class="mf">0.363</span>    <span class="mf">0.000</span>   <span class="mf">45.686</span>    <span class="mf">0.000</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">dm</span><span class="o">/.</span><span class="n">rally</span><span class="o">/</span><span class="n">benchmarks</span><span class="o">/</span><span class="n">tracks</span><span class="o">/</span><span class="n">develop</span><span class="o">/</span><span class="n">bottleneck</span><span class="o">/</span><span class="n">parameter_sources</span><span class="o">/</span><span class="n">randomevent</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">48</span><span class="p">(</span><span class="n">add_fields</span><span class="p">)</span>
   <span class="mi">129000</span>    <span class="mf">0.181</span>    <span class="mf">0.000</span>   <span class="mf">41.742</span>    <span class="mf">0.000</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">dm</span><span class="o">/.</span><span class="n">rally</span><span class="o">/</span><span class="n">benchmarks</span><span class="o">/</span><span class="n">tracks</span><span class="o">/</span><span class="n">develop</span><span class="o">/</span><span class="n">bottleneck</span><span class="o">/</span><span class="n">parameter_sources</span><span class="o">/</span><span class="n">randomevent</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">79</span><span class="p">(</span><span class="n">add_fields</span><span class="p">)</span>
   <span class="o">....</span>

<span class="o">===</span> <span class="n">Profile</span> <span class="n">END</span> <span class="k">for</span> <span class="n">client</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span> <span class="n">task</span> <span class="p">[</span><span class="n">index</span><span class="o">-</span><span class="n">append</span><span class="o">-</span><span class="mi">1000</span><span class="p">]</span> <span class="o">===</span>
</pre></div>
</div>
<p>In this example we can spot quickly that <code class="docutils literal notranslate"><span class="pre">Random.seed</span></code> is called excessively, causing an accidental bottleneck in the load test driver.</p>
</div>
<div class="section" id="test-mode">
<span id="clr-test-mode"></span><h3><code class="docutils literal notranslate"><span class="pre">test-mode</span></code><a class="headerlink" href="#test-mode" title="Permalink to this headline">¶</a></h3>
<p>Allows you to test a track without running it for the whole duration. This mode is only intended for quick sanity checks when creating a track. Don’t rely on these numbers at all (they are meaningless).</p>
<p>If you write your own track you need to <a class="reference internal" href="adding_tracks.html#add-track-test-mode"><span class="std std-ref">prepare your track to support this mode</span></a>.</p>
</div>
<div class="section" id="telemetry">
<h3><code class="docutils literal notranslate"><span class="pre">telemetry</span></code><a class="headerlink" href="#telemetry" title="Permalink to this headline">¶</a></h3>
<p>Activates the provided <a class="reference internal" href="telemetry.html"><span class="doc">telemetry devices</span></a> for this race.</p>
<p><strong>Example</strong></p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">esrally</span> <span class="o">--</span><span class="n">telemetry</span><span class="o">=</span><span class="n">jfr</span><span class="p">,</span><span class="n">jit</span>
</pre></div>
</div>
</div></blockquote>
<p>This activates Java flight recorder and the JIT compiler telemetry devices.</p>
</div>
<div class="section" id="telemetry-params">
<span id="clr-telemetry-params"></span><h3><code class="docutils literal notranslate"><span class="pre">telemetry-params</span></code><a class="headerlink" href="#telemetry-params" title="Permalink to this headline">¶</a></h3>
<p>Allows to set parameters for telemetry devices. It accepts a list of comma-separated key-value pairs or a JSON file name. The key-value pairs have to be delimited by a colon. See the <a class="reference internal" href="telemetry.html"><span class="doc">telemetry devices</span></a> documentation for a list of supported parameters.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">esrally</span> <span class="o">--</span><span class="n">telemetry</span><span class="o">=</span><span class="n">jfr</span> <span class="o">--</span><span class="n">telemetry</span><span class="o">-</span><span class="n">params</span><span class="o">=</span><span class="s2">&quot;recording-template:&#39;profile&#39;&quot;</span>
</pre></div>
</div>
<p>This enables the Java flight recorder telemetry device and sets the <code class="docutils literal notranslate"><span class="pre">recording-template</span></code> parameter to “profile”.</p>
<p>For more complex cases specify a JSON file. Store the following as <code class="docutils literal notranslate"><span class="pre">telemetry-params.json</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;node-stats-sample-interval&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
  <span class="s2">&quot;node-stats-include-indices-metrics&quot;</span><span class="p">:</span> <span class="s2">&quot;completion,docs,fielddata&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>and reference it when running Rally:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">esrally</span> <span class="o">--</span><span class="n">telemetry</span><span class="o">=</span><span class="s2">&quot;node-stats&quot;</span> <span class="o">--</span><span class="n">telemetry</span><span class="o">-</span><span class="n">params</span><span class="o">=</span><span class="s2">&quot;telemetry-params.json&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="runtime-jdk">
<h3><code class="docutils literal notranslate"><span class="pre">runtime-jdk</span></code><a class="headerlink" href="#runtime-jdk" title="Permalink to this headline">¶</a></h3>
<p>By default, Rally will derive the appropriate runtime JDK versions automatically per version of Elasticsearch. For example, it will choose JDK 8 for Elasticsearch 5.0.0 but JDK 12, 11 or 8 for Elasticsearch 7.0.0. It will choose the highest available version.</p>
<p>This command line parameter sets the major version of the JDK that Rally should use to run Elasticsearch. It is required that either <code class="docutils literal notranslate"><span class="pre">JAVA_HOME</span></code> or <code class="docutils literal notranslate"><span class="pre">JAVAx_HOME</span></code> (where <code class="docutils literal notranslate"><span class="pre">x</span></code> is the major version, e.g. <code class="docutils literal notranslate"><span class="pre">JAVA11_HOME</span></code> for a JDK 11) points to the appropriate JDK.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run a benchmark with defaults (i.e. JDK 8)</span>
<span class="n">esrally</span> <span class="o">--</span><span class="n">distribution</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">5.0</span><span class="o">.</span><span class="mi">0</span>
<span class="c1"># Force to run with JDK 11</span>
<span class="n">esrally</span> <span class="o">--</span><span class="n">distribution</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">7.0</span><span class="o">.</span><span class="mi">0</span> <span class="o">--</span><span class="n">runtime</span><span class="o">-</span><span class="n">jdk</span><span class="o">=</span><span class="mi">11</span>
</pre></div>
</div>
<p>It is also possible to specify the JDK that is bundled with Elasticsearch with the special value <code class="docutils literal notranslate"><span class="pre">bundled</span></code>. The <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/release-highlights-7.0.0.html#_bundle_jdk_in_elasticsearch_distribution">JDK is bundled from Elasticsearch 7.0.0 onwards</a>.</p>
</div>
<div class="section" id="revision">
<span id="clr-revision"></span><h3><code class="docutils literal notranslate"><span class="pre">revision</span></code><a class="headerlink" href="#revision" title="Permalink to this headline">¶</a></h3>
<p>If you actively develop Elasticsearch and want to benchmark a source build of Elasticsearch (which Rally will create for you), you can specify the git revision of Elasticsearch that you want to benchmark. But note that Rally uses and expects the Gradle Wrapper in the Elasticsearch repository (<code class="docutils literal notranslate"><span class="pre">./gradlew</span></code>) which effectively means that it will only support this for Elasticsearch 5.0 or better. The default value is <code class="docutils literal notranslate"><span class="pre">current</span></code>.</p>
<p>You can specify the revision in different formats:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--revision=latest</span></code>: Use the HEAD revision from origin/master.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--revision=current</span></code>: Use the current revision (i.e. don’t alter the local source tree).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--revision=abc123</span></code>: Where <code class="docutils literal notranslate"><span class="pre">abc123</span></code> is some git revision hash.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--revision=&#64;2013-07-27T10:37:00Z</span></code>: Determines the revision that is closest to the provided date. Rally logs to which git revision hash the date has been resolved and if you use Elasticsearch as metrics store (instead of the default in-memory one), <a class="reference internal" href="metrics.html"><span class="doc">each metric record will contain the git revision hash also in the meta-data section</span></a>.</p></li>
</ul>
<p>Supported date format: If you specify a date, it has to be ISO-8601 conformant and must start with an <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> sign to make it easier for Rally to determine that you actually mean a date.</p>
<p>If you want to create source builds of Elasticsearch plugins, you need to specify the revision for Elasticsearch and all relevant plugins separately. Revisions for Elasticsearch and each plugin need to be comma-separated (<code class="docutils literal notranslate"><span class="pre">,</span></code>). Each revision is prefixed either by <code class="docutils literal notranslate"><span class="pre">elasticsearch</span></code> or by the plugin name and separated by a colon (<code class="docutils literal notranslate"><span class="pre">:</span></code>). As core plugins are contained in the Elasticsearch repo, there is no need to specify a revision for them (the revision would even be ignored in fact).</p>
<p>Examples:</p>
<ul class="simple">
<li><p>Build latest Elasticsearch and plugin “my-plugin”: <code class="docutils literal notranslate"><span class="pre">--revision=&quot;elasticsearch:latest,my-plugin:latest&quot;</span></code></p></li>
<li><p>Build Elasticsearch tag <code class="docutils literal notranslate"><span class="pre">v5.6.1</span></code> and revision <code class="docutils literal notranslate"><span class="pre">abc123</span></code> of plugin “my-plugin”: <code class="docutils literal notranslate"><span class="pre">--revision=&quot;elasticsearch:v5.6.1,my-plugin:abc123&quot;</span></code></p></li>
</ul>
<p>Note that it is still required to provide the parameter <code class="docutils literal notranslate"><span class="pre">--elasticsearch-plugins</span></code>. Specifying a plugin with <code class="docutils literal notranslate"><span class="pre">--revision</span></code> just tells Rally which revision to use for building the artifact. See the documentation on <a class="reference internal" href="elasticsearch_plugins.html"><span class="doc">Elasticsearch plugins</span></a> for more details.</p>
</div>
<div class="section" id="distribution-version">
<h3><code class="docutils literal notranslate"><span class="pre">distribution-version</span></code><a class="headerlink" href="#distribution-version" title="Permalink to this headline">¶</a></h3>
<p>If you want Rally to launch and benchmark a cluster using a binary distribution, you can specify the version here.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Do not use <code class="docutils literal notranslate"><span class="pre">distribution-version</span></code> when benchmarking a cluster that hasn’t been setup by Rally (i.e. together with <code class="docutils literal notranslate"><span class="pre">pipeline=benchmark-only</span></code>); Rally automatically derives and stores the version of the cluster in the metrics store regardless of the <code class="docutils literal notranslate"><span class="pre">pipeline</span></code> used.</p>
</div>
<p><strong>Example</strong></p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">esrally</span> <span class="o">--</span><span class="n">distribution</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">7.0</span><span class="o">.</span><span class="mi">0</span>
</pre></div>
</div>
</div></blockquote>
<p>Rally will then benchmark the official Elasticsearch 7.0.0 distribution. Please check our <a class="reference internal" href="versions.html"><span class="doc">version support page</span></a> to see which Elasticsearch versions are currently supported by Rally.</p>
</div>
<div class="section" id="distribution-repository">
<h3><code class="docutils literal notranslate"><span class="pre">distribution-repository</span></code><a class="headerlink" href="#distribution-repository" title="Permalink to this headline">¶</a></h3>
<p>Rally does not only support benchmarking official distributions but can also benchmark snapshot builds. This is option is really just intended for <a class="reference external" href="https://elasticsearch-benchmarks.elastic.co/">our benchmarks that are run in continuous integration</a> but if you want to, you can use it too. The only supported value out of the box is <code class="docutils literal notranslate"><span class="pre">release</span></code> (default) but you can define arbitrary repositories in <code class="docutils literal notranslate"><span class="pre">~/.rally/rally.ini</span></code>.</p>
<p><strong>Example</strong></p>
<p>Say, you have an in-house repository where Elasticsearch snapshot builds get published. Then you can add the following in the <code class="docutils literal notranslate"><span class="pre">distributions</span></code> section of your Rally config file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">in_house_snapshot</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">snapshots</span><span class="o">/</span><span class="n">elasticsearch</span><span class="o">/</span><span class="n">elasticsearch</span><span class="o">-</span><span class="p">{{</span><span class="n">VERSION</span><span class="p">}}</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
<span class="n">in_house_snapshot</span><span class="o">.</span><span class="n">cache</span> <span class="o">=</span> <span class="n">false</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">url</span></code> property defines the URL pattern for this repository. The <code class="docutils literal notranslate"><span class="pre">cache</span></code> property defines whether Rally should always download a new archive (<code class="docutils literal notranslate"><span class="pre">cache=false</span></code>) or just reuse a previously downloaded version (<code class="docutils literal notranslate"><span class="pre">cache=true</span></code>). Rally will replace the <code class="docutils literal notranslate"><span class="pre">{{VERSION}}</span></code> placeholder of in the <code class="docutils literal notranslate"><span class="pre">url</span></code> property with the value of <code class="docutils literal notranslate"><span class="pre">distribution-version</span></code> provided by the user on the command line.</p>
<p>You can use this distribution repository with the name “in_house_snapshot” as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">esrally</span> <span class="o">--</span><span class="n">distribution</span><span class="o">-</span><span class="n">repository</span><span class="o">=</span><span class="n">in_house_snapshot</span> <span class="o">--</span><span class="n">distribution</span><span class="o">-</span><span class="n">version</span><span class="o">=</span><span class="mf">7.0</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="n">SNAPSHOT</span>
</pre></div>
</div>
<p>This will benchmark the latest 7.0.0 snapshot build of Elasticsearch.</p>
</div>
<div class="section" id="report-format">
<h3><code class="docutils literal notranslate"><span class="pre">report-format</span></code><a class="headerlink" href="#report-format" title="Permalink to this headline">¶</a></h3>
<p>The command line reporter in Rally displays a table with key metrics after a race. With this option you can specify whether this table should be in <code class="docutils literal notranslate"><span class="pre">markdown</span></code> format (default) or <code class="docutils literal notranslate"><span class="pre">csv</span></code>.</p>
</div>
<div class="section" id="show-in-report">
<h3><code class="docutils literal notranslate"><span class="pre">show-in-report</span></code><a class="headerlink" href="#show-in-report" title="Permalink to this headline">¶</a></h3>
<p>By default, the command line reporter will only show values that are available (<code class="docutils literal notranslate"><span class="pre">available</span></code>). With <code class="docutils literal notranslate"><span class="pre">all</span></code> you can force it to show a line for every value, even undefined ones, and with <code class="docutils literal notranslate"><span class="pre">all-percentiles</span></code> it will show only available values but force output of all possible percentile values.</p>
<p>This command line parameter is not available for comparing races.</p>
</div>
<div class="section" id="report-file">
<h3><code class="docutils literal notranslate"><span class="pre">report-file</span></code><a class="headerlink" href="#report-file" title="Permalink to this headline">¶</a></h3>
<p>By default, the command line reporter will print the results only on standard output, but can also write it to a file.</p>
<p><strong>Example</strong></p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">esrally</span> <span class="o">--</span><span class="n">report</span><span class="o">-</span><span class="nb">format</span><span class="o">=</span><span class="n">csv</span> <span class="o">--</span><span class="n">report</span><span class="o">-</span><span class="n">file</span><span class="o">=~/</span><span class="n">benchmarks</span><span class="o">/</span><span class="n">result</span><span class="o">.</span><span class="n">csv</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="client-options">
<span id="clr-client-options"></span><h3><code class="docutils literal notranslate"><span class="pre">client-options</span></code><a class="headerlink" href="#client-options" title="Permalink to this headline">¶</a></h3>
<p>With this option you can customize Rally’s internal Elasticsearch client.</p>
<p>It accepts a list of comma-separated key-value pairs. The key-value pairs have to be delimited by a colon. These options are passed directly to the Elasticsearch Python client API. See <a class="reference external" href="http://elasticsearch-py.readthedocs.io/en/master/api.html#elasticsearch.Elasticsearch">their documentation on a list of supported options</a>.</p>
<p>We support the following data types:</p>
<ul class="simple">
<li><p>Strings: Have to be enclosed in single quotes. Example: <code class="docutils literal notranslate"><span class="pre">ca_certs:'/path/to/CA_certs'</span></code></p></li>
<li><p>Numbers: There is nothing special about numbers. Example: <code class="docutils literal notranslate"><span class="pre">sniffer_timeout:60</span></code></p></li>
<li><p>Booleans: Specify either <code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code>. Example: <code class="docutils literal notranslate"><span class="pre">use_ssl:true</span></code></p></li>
</ul>
<p>Default value: <code class="docutils literal notranslate"><span class="pre">timeout:60</span></code></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you provide your own client options, the default value will not be magically merged. You have to specify all client options explicitly. The only exceptions to this rule is <code class="docutils literal notranslate"><span class="pre">ca_cert</span></code> (see below).</p>
</div>
<p>Rally recognizes the following client options in addition:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">max_connections</span></code>: By default, Rally will choose the maximum allowed number of connections automatically (equal to the number of simulated clients but at least 256 connections). With this property it is possible to override that logic but a minimum of 256 is enforced internally.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enable_cleanup_closed</span></code> (default: <code class="docutils literal notranslate"><span class="pre">false</span></code>): In some cases, SSL connections might not be properly closed and the number of open connections increases as a result. When this client option is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, the Elasticsearch client will check and forcefully close these connections.</p></li>
</ul>
<p><strong>Examples</strong></p>
<p>Here are a few common examples:</p>
<ul class="simple">
<li><p>Enable HTTP compression: <code class="docutils literal notranslate"><span class="pre">--client-options=&quot;http_compress:true&quot;</span></code></p></li>
<li><p>Enable basic authentication: <code class="docutils literal notranslate"><span class="pre">--client-options=&quot;basic_auth_user:'user',basic_auth_password:'password'&quot;</span></code>. Avoid the characters <code class="docutils literal notranslate"><span class="pre">'</span></code>, <code class="docutils literal notranslate"><span class="pre">,</span></code> and <code class="docutils literal notranslate"><span class="pre">:</span></code> in user name and password as Rally’s parsing of these options is currently really simple and there is no possibility to escape characters.</p></li>
</ul>
<p><strong>TLS/SSL</strong></p>
<p>This is applicable e.g. if you have X-Pack Security installed.
Enable it with <code class="docutils literal notranslate"><span class="pre">use_ssl:true</span></code>.</p>
<p><strong>TLS/SSL Certificate Verification</strong></p>
<p>Server certificate verification is controlled with the <code class="docutils literal notranslate"><span class="pre">verify_certs</span></code> boolean. The default value is <cite>true</cite>. To disable use <code class="docutils literal notranslate"><span class="pre">verify_certs:false</span></code>.
If <code class="docutils literal notranslate"><span class="pre">verify_certs:true</span></code>, Rally will attempt to verify the certificate provided by Elasticsearch. If they are private certificates, you will also need to supply the private CA certificate using <code class="docutils literal notranslate"><span class="pre">ca_certs:'/path/to/cacert.pem'</span></code>.</p>
<p>You can also optionally present client certificates, e.g. if Elasticsearch has been configured with <code class="docutils literal notranslate"><span class="pre">xpack.security.http.ssl.client_authentication:</span> <span class="pre">required</span></code> (see also <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html#http-tls-ssl-settings">Elasticsearch HTTP TLS/SSL settings</a>).
Client certificates can be presented regardless of the <code class="docutils literal notranslate"><span class="pre">verify_certs</span></code> setting, but it’s strongly recommended to always verify the server certificates.</p>
<p><strong>TLS/SSL Examples</strong></p>
<ul class="simple">
<li><p>Enable SSL, verify server certificates using public CA: <code class="docutils literal notranslate"><span class="pre">--client-options=&quot;use_ssl:true,verify_certs:true&quot;</span></code>. Note that you don’t need to set <code class="docutils literal notranslate"><span class="pre">ca_cert</span></code> (which defines the path to the root certificates). Rally does this automatically for you.</p></li>
<li><p>Enable SSL, verify server certificates using private CA: <code class="docutils literal notranslate"><span class="pre">--client-options=&quot;use_ssl:true,verify_certs:true,ca_certs:'/path/to/cacert.pem'&quot;</span></code></p></li>
<li><p>Enable SSL, verify server certificates using private CA, present client certificates: <code class="docutils literal notranslate"><span class="pre">--client-options=&quot;use_ssl:true,verify_certs:true,ca_certs:'/path/to/cacert.pem',client_cert:'/path/to/client_cert.pem',client_key:'/path/to/client_key.pem'&quot;</span></code></p></li>
</ul>
</div>
<div class="section" id="on-error">
<span id="command-line-reference-on-error"></span><h3><code class="docutils literal notranslate"><span class="pre">on-error</span></code><a class="headerlink" href="#on-error" title="Permalink to this headline">¶</a></h3>
<p>This option controls how Rally behaves when a response error occurs. The following values are possible:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">continue</span></code>: only records that an error has happened and will continue with the benchmark. At the end of a race, errors show up in the “error rate” metric.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">continue-on-non-fatal</span></code> (default): Behaves as <code class="docutils literal notranslate"><span class="pre">continue</span></code> but aborts the benchmark immediately on all fatal errors. The only error that is considered fatal is “Connection Refused” (<a class="reference external" href="http://man7.org/linux/man-pages/man2/connect.2.html">ECONNREFUSED</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">abort</span></code>: aborts the benchmark on the first request error with a detailed error message.</p></li>
</ul>
</div>
<div class="section" id="load-driver-hosts">
<h3><code class="docutils literal notranslate"><span class="pre">load-driver-hosts</span></code><a class="headerlink" href="#load-driver-hosts" title="Permalink to this headline">¶</a></h3>
<p>By default, Rally will run its load driver on the same machine where you start the benchmark. However, if you benchmark larger clusters, one machine may not be enough to generate sufficient load. Hence, you can specify a comma-separated list of hosts which should be used to generate load with <code class="docutils literal notranslate"><span class="pre">--load-driver-hosts</span></code>.</p>
<p><strong>Example</strong></p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">esrally</span> <span class="o">--</span><span class="n">load</span><span class="o">-</span><span class="n">driver</span><span class="o">-</span><span class="n">hosts</span><span class="o">=</span><span class="mf">10.17</span><span class="o">.</span><span class="mf">20.5</span><span class="p">,</span><span class="mf">10.17</span><span class="o">.</span><span class="mf">20.6</span>
</pre></div>
</div>
</div></blockquote>
<p>In the example, above Rally will generate load from the hosts <code class="docutils literal notranslate"><span class="pre">10.17.20.5</span></code> and <code class="docutils literal notranslate"><span class="pre">10.17.20.6</span></code>. For this to work, you need to start a Rally daemon on these machines, see <a class="reference internal" href="recipes.html#recipe-distributed-load-driver"><span class="std std-ref">distributing the load test driver</span></a> for a complete example.</p>
</div>
<div class="section" id="target-hosts">
<h3><code class="docutils literal notranslate"><span class="pre">target-hosts</span></code><a class="headerlink" href="#target-hosts" title="Permalink to this headline">¶</a></h3>
<p>If you run the <code class="docutils literal notranslate"><span class="pre">benchmark-only</span></code> <a class="reference internal" href="pipelines.html"><span class="doc">pipeline</span></a> or you want Rally to <a class="reference internal" href="recipes.html"><span class="doc">benchmark a remote cluster</span></a>, then you can specify a comma-delimited list of hosts:port pairs to which Rally should connect. The default value is <code class="docutils literal notranslate"><span class="pre">127.0.0.1:9200</span></code>.</p>
<p><strong>Example</strong></p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">esrally</span> <span class="o">--</span><span class="n">pipeline</span><span class="o">=</span><span class="n">benchmark</span><span class="o">-</span><span class="n">only</span> <span class="o">--</span><span class="n">target</span><span class="o">-</span><span class="n">hosts</span><span class="o">=</span><span class="mf">10.17</span><span class="o">.</span><span class="mf">0.5</span><span class="p">:</span><span class="mi">9200</span><span class="p">,</span><span class="mf">10.17</span><span class="o">.</span><span class="mf">0.6</span><span class="p">:</span><span class="mi">9200</span>
</pre></div>
</div>
</div></blockquote>
<p>This will run the benchmark against the hosts 10.17.0.5 and 10.17.0.6 on port 9200. See <code class="docutils literal notranslate"><span class="pre">client-options</span></code> if you use X-Pack Security and need to authenticate or Rally should use https.</p>
<p>You can also target multiple clusters with <code class="docutils literal notranslate"><span class="pre">--target-hosts</span></code> for specific use cases. This is described in the <a class="reference internal" href="#command-line-reference-advanced-topics"><span class="std std-ref">Advanced topics section</span></a>.</p>
</div>
<div class="section" id="limit">
<h3><code class="docutils literal notranslate"><span class="pre">limit</span></code><a class="headerlink" href="#limit" title="Permalink to this headline">¶</a></h3>
<p>Allows to control the number of races returned by <code class="docutils literal notranslate"><span class="pre">esrally</span> <span class="pre">list</span> <span class="pre">races</span></code> The default value is 10.</p>
<p><strong>Example</strong></p>
<p>The following invocation will list the 50 most recent races:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">esrally</span> <span class="nb">list</span> <span class="n">races</span> <span class="o">--</span><span class="n">limit</span><span class="o">=</span><span class="mi">50</span>
</pre></div>
</div>
</div>
<div class="section" id="quiet">
<h3><code class="docutils literal notranslate"><span class="pre">quiet</span></code><a class="headerlink" href="#quiet" title="Permalink to this headline">¶</a></h3>
<p>Suppresses some output on the command line.</p>
</div>
<div class="section" id="kill-running-processes">
<h3><code class="docutils literal notranslate"><span class="pre">kill-running-processes</span></code><a class="headerlink" href="#kill-running-processes" title="Permalink to this headline">¶</a></h3>
<p>Rally attempts to generate benchmark results that are not skewed unintentionally. Consequently, if some benchmark is running, Rally will not allow you to start another one. Instead, you should stop the current benchmark and start another one manually. This flag can be added to handle automatically this process for you.</p>
<p>Only one Rally benchmark is allowed to run at the same time. If any processes is running, it is going to kill them and allow Rally to continue to run a new benchmark.</p>
<p>The default value is <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
</div>
<div class="section" id="offline">
<h3><code class="docutils literal notranslate"><span class="pre">offline</span></code><a class="headerlink" href="#offline" title="Permalink to this headline">¶</a></h3>
<p>Tells Rally that it should assume it has no connection to the Internet when checking for track data. The default value is <code class="docutils literal notranslate"><span class="pre">false</span></code>. Note that Rally will only assume this for tracks but not for anything else, e.g. it will still try to download Elasticsearch distributions that are not locally cached or fetch the Elasticsearch source tree.</p>
</div>
<div class="section" id="preserve-install">
<h3><code class="docutils literal notranslate"><span class="pre">preserve-install</span></code><a class="headerlink" href="#preserve-install" title="Permalink to this headline">¶</a></h3>
<p>Rally usually installs and launches an Elasticsearch cluster internally and wipes the entire directory after the benchmark is done. Sometimes you want to keep this cluster including all data after the benchmark has finished and that’s what you can do with this flag. Note that depending on the track that has been run, the cluster can eat up a very significant amount of disk space (at least dozens of GB). The default value is configurable in the advanced configuration but usually <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This option does only affect clusters that are provisioned by Rally. More specifically, if you use the pipeline <code class="docutils literal notranslate"><span class="pre">benchmark-only</span></code>, this option is ineffective as Rally does not provision a cluster in this case.</p>
</div>
</div>
<div class="section" id="user-tag">
<h3><code class="docutils literal notranslate"><span class="pre">user-tag</span></code><a class="headerlink" href="#user-tag" title="Permalink to this headline">¶</a></h3>
<p>This is only relevant when you want to run <a class="reference internal" href="tournament.html"><span class="doc">tournaments</span></a>. You can use this flag to attach an arbitrary text to the meta-data of each metric record and also the corresponding race. This will help you to recognize a race when you run <code class="docutils literal notranslate"><span class="pre">esrally</span> <span class="pre">list</span> <span class="pre">races</span></code> as you don’t need to remember the concrete timestamp on which a race has been run but can instead use your own descriptive names.</p>
<p>The required format is <code class="docutils literal notranslate"><span class="pre">key</span></code> “:” <code class="docutils literal notranslate"><span class="pre">value</span></code>. You can choose <code class="docutils literal notranslate"><span class="pre">key</span></code> and  <code class="docutils literal notranslate"><span class="pre">value</span></code> freely.</p>
<p><strong>Example</strong></p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">esrally</span> <span class="o">--</span><span class="n">user</span><span class="o">-</span><span class="n">tag</span><span class="o">=</span><span class="s2">&quot;intention:github-issue-1234-baseline,gc:cms&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p>You can also specify multiple tags. They need to be separated by a comma.</p>
<p><strong>Example</strong></p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">esrally</span> <span class="o">--</span><span class="n">user</span><span class="o">-</span><span class="n">tag</span><span class="o">=</span><span class="s2">&quot;disk:SSD,data_node_count:4&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p>When you run <code class="docutils literal notranslate"><span class="pre">esrally</span> <span class="pre">list</span> <span class="pre">races</span></code>, this will show up again:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Race</span> <span class="n">Timestamp</span>    <span class="n">Track</span>    <span class="n">Track</span> <span class="n">Parameters</span>   <span class="n">Challenge</span>            <span class="n">Car</span>       <span class="n">User</span> <span class="n">Tag</span>
<span class="o">----------------</span>  <span class="o">-------</span>  <span class="o">------------------</span> <span class="o">-------------------</span>  <span class="o">--------</span>  <span class="o">------------------------------------</span>
<span class="mi">20160518</span><span class="n">T122341Z</span>  <span class="n">pmc</span>                         <span class="n">append</span><span class="o">-</span><span class="n">no</span><span class="o">-</span><span class="n">conflicts</span>  <span class="n">defaults</span>  <span class="n">intention</span><span class="p">:</span><span class="n">github</span><span class="o">-</span><span class="n">issue</span><span class="o">-</span><span class="mi">1234</span><span class="o">-</span><span class="n">baseline</span>
<span class="mi">20160518</span><span class="n">T112341Z</span>  <span class="n">pmc</span>                         <span class="n">append</span><span class="o">-</span><span class="n">no</span><span class="o">-</span><span class="n">conflicts</span>  <span class="n">defaults</span>  <span class="n">disk</span><span class="p">:</span><span class="n">SSD</span><span class="p">,</span><span class="n">data_node_count</span><span class="p">:</span><span class="mi">4</span>
</pre></div>
</div>
<p>This will help you recognize a specific race when running <code class="docutils literal notranslate"><span class="pre">esrally</span> <span class="pre">compare</span></code>.</p>
</div>
<div class="section" id="indices">
<h3><code class="docutils literal notranslate"><span class="pre">indices</span></code><a class="headerlink" href="#indices" title="Permalink to this headline">¶</a></h3>
<p>A comma-separated list of index patterns to target when generating a track with the <code class="docutils literal notranslate"><span class="pre">create-track</span></code> subcommand.</p>
<p><strong>Examples</strong></p>
<p>Target a single index:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">esrally</span> <span class="n">create</span><span class="o">-</span><span class="n">track</span> <span class="o">--</span><span class="n">track</span><span class="o">=</span><span class="n">acme</span> <span class="o">--</span><span class="n">indices</span><span class="o">=</span><span class="s2">&quot;products&quot;</span> <span class="o">--</span><span class="n">target</span><span class="o">-</span><span class="n">hosts</span><span class="o">=</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">9200</span> <span class="o">--</span><span class="n">output</span><span class="o">-</span><span class="n">path</span><span class="o">=~/</span><span class="n">tracks</span>
</pre></div>
</div>
<p>Target multiple indices:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">esrally</span> <span class="n">create</span><span class="o">-</span><span class="n">track</span> <span class="o">--</span><span class="n">track</span><span class="o">=</span><span class="n">acme</span> <span class="o">--</span><span class="n">indices</span><span class="o">=</span><span class="s2">&quot;products,companies&quot;</span> <span class="o">--</span><span class="n">target</span><span class="o">-</span><span class="n">hosts</span><span class="o">=</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">9200</span> <span class="o">--</span><span class="n">output</span><span class="o">-</span><span class="n">path</span><span class="o">=~/</span><span class="n">tracks</span>
</pre></div>
</div>
<p>Use index patterns:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">esrally</span> <span class="n">create</span><span class="o">-</span><span class="n">track</span> <span class="o">--</span><span class="n">track</span><span class="o">=</span><span class="n">my</span><span class="o">-</span><span class="n">logs</span> <span class="o">--</span><span class="n">indices</span><span class="o">=</span><span class="s2">&quot;logs-*&quot;</span> <span class="o">--</span><span class="n">target</span><span class="o">-</span><span class="n">hosts</span><span class="o">=</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">9200</span> <span class="o">--</span><span class="n">output</span><span class="o">-</span><span class="n">path</span><span class="o">=~/</span><span class="n">tracks</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the cluster requires authentication specify credentials via <code class="docutils literal notranslate"><span class="pre">--client-options</span></code> as described in the <a class="reference internal" href="#clr-client-options"><span class="std std-ref">command line reference</span></a>.</p>
</div>
</div>
</div>
<div class="section" id="advanced-topics">
<span id="command-line-reference-advanced-topics"></span><h2>Advanced topics<a class="headerlink" href="#advanced-topics" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3><code class="docutils literal notranslate"><span class="pre">target-hosts</span></code><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Rally can also create client connections for multiple Elasticsearch clusters.
This is only useful if you want to create <a class="reference internal" href="adding_tracks.html#adding-tracks-custom-runners"><span class="std std-ref">custom runners</span></a> that execute operations against multiple clusters, for example for <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-cross-cluster-search.html">cross cluster search</a> or cross cluster replication.</p>
<p>To define the host:port pairs for additional clusters with <code class="docutils literal notranslate"><span class="pre">target-hosts</span></code> you can specify either a JSON filename (ending in <code class="docutils literal notranslate"><span class="pre">.json</span></code>) or an inline JSON string. The JSON object should be a collection of name:value pairs. <code class="docutils literal notranslate"><span class="pre">name</span></code> is string for the cluster name and there <strong>must be</strong> one <code class="docutils literal notranslate"><span class="pre">default</span></code>.</p>
<p>Examples:</p>
<ul>
<li><p>json file: <code class="docutils literal notranslate"><span class="pre">--target-hosts=&quot;target_hosts1.json&quot;</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;127.0.0.1:9200&quot;</span><span class="p">,</span><span class="s2">&quot;10.127.0.3:19200&quot;</span><span class="p">]</span> <span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>json file defining two clusters: <code class="docutils literal notranslate"><span class="pre">--target-hosts=&quot;target_hosts2.json&quot;</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span><span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span> <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="mi">9200</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span> <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="mi">19200</span><span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">&quot;remote&quot;</span><span class="p">:[</span>
    <span class="p">{</span><span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;10.127.0.3&quot;</span><span class="p">,</span> <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="mi">9200</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;10.127.0.8&quot;</span><span class="p">,</span> <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="mi">9201</span><span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>json inline string defining two clusters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">target</span><span class="o">-</span><span class="n">hosts</span><span class="o">=</span><span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">default</span><span class="se">\&quot;</span><span class="s2">:[</span><span class="se">\&quot;</span><span class="s2">127.0.0.1:9200</span><span class="se">\&quot;</span><span class="s2">],</span><span class="se">\&quot;</span><span class="s2">remote</span><span class="se">\&quot;</span><span class="s2">:[</span><span class="se">\&quot;</span><span class="s2">127.0.0.1:19200</span><span class="se">\&quot;</span><span class="s2">,</span><span class="se">\&quot;</span><span class="s2">127.0.0.1:19201</span><span class="se">\&quot;</span><span class="s2">]}&quot;</span>
</pre></div>
</div>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>All</strong> <a class="reference internal" href="track.html#track-operations"><span class="std std-ref">built-in operations</span></a> will use the connection to the <code class="docutils literal notranslate"><span class="pre">default</span></code> cluster. However, you can utilize the client connections to the additional clusters in your <a class="reference internal" href="adding_tracks.html#adding-tracks-custom-runners"><span class="std std-ref">custom runners</span></a>.</p>
</div>
</div>
<div class="section" id="id2">
<h3><code class="docutils literal notranslate"><span class="pre">client-options</span></code><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">client-options</span></code> can optionally specify options for the Elasticsearch clients when multiple clusters have been defined with <code class="docutils literal notranslate"><span class="pre">target-hosts</span></code>. If omitted, the default is <code class="docutils literal notranslate"><span class="pre">timeout:60</span></code> for all cluster connections.</p>
<p>The format is similar to <code class="docutils literal notranslate"><span class="pre">target-hosts</span></code>, supporting both filenames ending in <code class="docutils literal notranslate"><span class="pre">.json</span></code> or inline JSON, however, the parameters are a collection of name:value pairs, as opposed to arrays.</p>
<p>Examples, assuming that two clusters have been specified with <code class="docutils literal notranslate"><span class="pre">--target-hosts</span></code>:</p>
<ul>
<li><p>json file: <code class="docutils literal notranslate"><span class="pre">--client-options=&quot;client_options1.json&quot;</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;timeout&quot;</span><span class="p">:</span> <span class="mi">60</span>
<span class="p">},</span>
  <span class="s2">&quot;remote&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;use_ssl&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;verify_certs&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;ca_certs&quot;</span><span class="p">:</span> <span class="s2">&quot;/path/to/cacert.pem&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>json inline string defining two clusters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">client</span><span class="o">-</span><span class="n">options</span><span class="o">=</span><span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">default</span><span class="se">\&quot;</span><span class="s2">:{</span><span class="se">\&quot;</span><span class="s2">timeout</span><span class="se">\&quot;</span><span class="s2">: 60}, </span><span class="se">\&quot;</span><span class="s2">remote</span><span class="se">\&quot;</span><span class="s2">: {</span><span class="se">\&quot;</span><span class="s2">use_ssl</span><span class="se">\&quot;</span><span class="s2">:true,</span><span class="se">\&quot;</span><span class="s2">verify_certs</span><span class="se">\&quot;</span><span class="s2">:false,</span><span class="se">\&quot;</span><span class="s2">ca_certs</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">/path/to/cacert.pem</span><span class="se">\&quot;</span><span class="s2">}}&quot;</span>
</pre></div>
</div>
</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you use <code class="docutils literal notranslate"><span class="pre">client-options</span></code> you must specify options for <strong>every</strong> cluster name defined with <code class="docutils literal notranslate"><span class="pre">target-hosts</span></code>. Rally will raise an error if there is a mismatch.</p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="configuration.html" class="btn btn-neutral float-right" title="Configuration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="versions.html" class="btn btn-neutral float-left" title="Elasticsearch Version Support" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2021, Elasticsearch B.V.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>